@namespace("ru.yandex.practicum.kafka.telemetry.event")
protocol SensorsSnapshotProtocol {

  // импортируем схемы, которые создали ранее
  import idl "SensorEvent.avdl";

  // схема состояния датчика
  record SensorStateAvro {
      long timestamp;  // время отправки показаний
      union {          // показания конкретного датчика
          ClimateSensorAvro,
          LightSensorAvro,
          MotionSensorAvro,
          SwitchSensorAvro,
          TemperatureSensorAvro
      } data;
  }

  // Схема снапшота
  record SensorsSnapshotAvro {
      string hubId;                      // идентификатор хаба
      long timestamp;                    // метка времени снимка
      map<SensorStateAvro> sensorsState; // набор состояний, где ключ - id устройства
  }
}